// Code generated by protoc-gen-go-wrpc. DO NOT EDIT
// protoc-gen-go-wrpc version: v0.0.0-20220713182016-0ac0ed43d830

package v1

import (
	context "context"
	wrpc "github.com/kong/go-wrpc/wrpc"
)

type ConfigService interface {
	GetCapabilities(context.Context, *wrpc.Peer, *GetCapabilitiesRequest) (*GetCapabilitiesResponse, error)
	ReportMetadata(context.Context, *wrpc.Peer, *ReportMetadataRequest) (*ReportMetadataResponse, error)
	SyncConfig(context.Context, *wrpc.Peer, *SyncConfigRequest) (*SyncConfigResponse, error)
	PingCP(context.Context, *wrpc.Peer, *PingCPRequest) (*PingCPResponse, error)
}

func PrepareConfigServiceGetCapabilitiesRequest(in *GetCapabilitiesRequest) (wrpc.Request, error) {
	return wrpc.CreateRequest(1, 1, in)
}

func PrepareConfigServiceReportMetadataRequest(in *ReportMetadataRequest) (wrpc.Request, error) {
	return wrpc.CreateRequest(1, 4, in)
}

func PrepareConfigServiceSyncConfigRequest(in *SyncConfigRequest) (wrpc.Request, error) {
	return wrpc.CreateRequest(1, 2, in)
}

func PrepareConfigServicePingCPRequest(in *PingCPRequest) (wrpc.Request, error) {
	return wrpc.CreateRequest(1, 3, in)
}

type ConfigServiceClient struct {
	Peer *wrpc.Peer
}

func (c *ConfigServiceClient) GetCapabilities(ctx context.Context, in *GetCapabilitiesRequest) (*GetCapabilitiesResponse, error) {
	err := c.Peer.VerifyRPC(1, 1)
	if err != nil {
		return nil, err
	}

	req, err := PrepareConfigServiceGetCapabilitiesRequest(in)
	if err != nil {
		return nil, err
	}

	var out GetCapabilitiesResponse
	err = c.Peer.DoRequest(ctx, req, &out)
	if err != nil {
		return nil, err
	}

	return &out, nil
}

func (c *ConfigServiceClient) ReportMetadata(ctx context.Context, in *ReportMetadataRequest) (*ReportMetadataResponse, error) {
	err := c.Peer.VerifyRPC(1, 4)
	if err != nil {
		return nil, err
	}

	req, err := PrepareConfigServiceReportMetadataRequest(in)
	if err != nil {
		return nil, err
	}

	var out ReportMetadataResponse
	err = c.Peer.DoRequest(ctx, req, &out)
	if err != nil {
		return nil, err
	}

	return &out, nil
}

func (c *ConfigServiceClient) SyncConfig(ctx context.Context, in *SyncConfigRequest) (*SyncConfigResponse, error) {
	err := c.Peer.VerifyRPC(1, 2)
	if err != nil {
		return nil, err
	}

	req, err := PrepareConfigServiceSyncConfigRequest(in)
	if err != nil {
		return nil, err
	}

	var out SyncConfigResponse
	err = c.Peer.DoRequest(ctx, req, &out)
	if err != nil {
		return nil, err
	}

	return &out, nil
}

func (c *ConfigServiceClient) PingCP(ctx context.Context, in *PingCPRequest) (*PingCPResponse, error) {
	err := c.Peer.VerifyRPC(1, 3)
	if err != nil {
		return nil, err
	}

	req, err := PrepareConfigServicePingCPRequest(in)
	if err != nil {
		return nil, err
	}

	var out PingCPResponse
	err = c.Peer.DoRequest(ctx, req, &out)
	if err != nil {
		return nil, err
	}

	return &out, nil
}

type ConfigServiceServer struct {
	ConfigService ConfigService
}

func (s *ConfigServiceServer) ID() wrpc.ID {
	return 1
}

func (s *ConfigServiceServer) RPC(rpc wrpc.ID) wrpc.RPC {
	switch rpc {
	case 1:
		return wrpc.RPCImpl{
			HandlerFunc: func(ctx context.Context, peer *wrpc.Peer, decode func(interface{}) error) (interface{}, error) {
				var in GetCapabilitiesRequest
				err := decode(&in)
				if err != nil {
					return nil, err
				}
				return s.ConfigService.GetCapabilities(ctx, peer, &in)
			},
		}
	case 4:
		return wrpc.RPCImpl{
			HandlerFunc: func(ctx context.Context, peer *wrpc.Peer, decode func(interface{}) error) (interface{}, error) {
				var in ReportMetadataRequest
				err := decode(&in)
				if err != nil {
					return nil, err
				}
				return s.ConfigService.ReportMetadata(ctx, peer, &in)
			},
		}
	case 2:
		return wrpc.RPCImpl{
			HandlerFunc: func(ctx context.Context, peer *wrpc.Peer, decode func(interface{}) error) (interface{}, error) {
				var in SyncConfigRequest
				err := decode(&in)
				if err != nil {
					return nil, err
				}
				return s.ConfigService.SyncConfig(ctx, peer, &in)
			},
		}
	case 3:
		return wrpc.RPCImpl{
			HandlerFunc: func(ctx context.Context, peer *wrpc.Peer, decode func(interface{}) error) (interface{}, error) {
				var in PingCPRequest
				err := decode(&in)
				if err != nil {
					return nil, err
				}
				return s.ConfigService.PingCP(ctx, peer, &in)
			},
		}
	default:
		return nil
	}
}
